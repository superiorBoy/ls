(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    ["pages/index/chat"], {

        /***/
        623:
            /*!**************************************************************!*\
              !*** E:/ceshi/lvshi/main.js?{"page":"pages%2Findex%2Fchat"} ***!
              \**************************************************************/
            /*! no static exports found */
            /***/
            (function (module, exports, __webpack_require__) {

                "use strict";
                /* WEBPACK VAR INJECTION */
                (function (createPage) {
                    __webpack_require__( /*! uni-pages */ 4);
                    var _vue = _interopRequireDefault(__webpack_require__( /*! vue */ 2));
                    var _chat = _interopRequireDefault(__webpack_require__( /*! ./pages/index/chat.vue */ 624));

                    function _interopRequireDefault(obj) {
                        return obj && obj.__esModule ? obj : {
                            default: obj
                        };
                    }
                    createPage(_chat.default);
                    /* WEBPACK VAR INJECTION */
                }.call(this, __webpack_require__( /*! ./node_modules/@dcloudio/uni-mp-baidu/dist/index.js */ 1)["createPage"]))

                /***/
            }),

        /***/
        624:
            /*!*******************************************!*\
              !*** E:/ceshi/lvshi/pages/index/chat.vue ***!
              \*******************************************/
            /*! no static exports found */
            /***/
            (function (module, __webpack_exports__, __webpack_require__) {

                "use strict";
                __webpack_require__.r(__webpack_exports__);
                /* harmony import */
                var _chat_vue_vue_type_template_id_f16335a4___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( /*! ./chat.vue?vue&type=template&id=f16335a4& */ 625);
                /* harmony import */
                var _chat_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( /*! ./chat.vue?vue&type=script&lang=js& */ 627);
                /* harmony reexport (unknown) */
                for (var __WEBPACK_IMPORT_KEY__ in _chat_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__)
                    if (__WEBPACK_IMPORT_KEY__ !== 'default') (function (key) {
                        __webpack_require__.d(__webpack_exports__, key, function () {
                            return _chat_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[key];
                        })
                    }(__WEBPACK_IMPORT_KEY__));
                /* harmony import */
                var _chat_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( /*! ./chat.vue?vue&type=style&index=0&lang=css& */ 629);
                /* harmony import */
                var _F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__( /*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */ 10);

                var renderjs





                /* normalize component */

                var component = Object(_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
                    _chat_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
                    _chat_vue_vue_type_template_id_f16335a4___WEBPACK_IMPORTED_MODULE_0__["render"],
                    _chat_vue_vue_type_template_id_f16335a4___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
                    false,
                    null,
                    null,
                    null,
                    false,
                    _chat_vue_vue_type_template_id_f16335a4___WEBPACK_IMPORTED_MODULE_0__["components"],
                    renderjs
                )

                component.options.__file = "pages/index/chat.vue"
                /* harmony default export */
                __webpack_exports__["default"] = (component.exports);

                /***/
            }),

        /***/
        625:
            /*!**************************************************************************!*\
              !*** E:/ceshi/lvshi/pages/index/chat.vue?vue&type=template&id=f16335a4& ***!
              \**************************************************************************/
            /*! exports provided: render, staticRenderFns, recyclableRender, components */
            /***/
            (function (module, __webpack_exports__, __webpack_require__) {

                "use strict";
                __webpack_require__.r(__webpack_exports__);
                /* harmony import */
                var _F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_chat_vue_vue_type_template_id_f16335a4___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( /*! -!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=template&id=f16335a4& */ 626);
                /* harmony reexport (safe) */
                __webpack_require__.d(__webpack_exports__, "render", function () {
                    return _F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_chat_vue_vue_type_template_id_f16335a4___WEBPACK_IMPORTED_MODULE_0__["render"];
                });

                /* harmony reexport (safe) */
                __webpack_require__.d(__webpack_exports__, "staticRenderFns", function () {
                    return _F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_chat_vue_vue_type_template_id_f16335a4___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"];
                });

                /* harmony reexport (safe) */
                __webpack_require__.d(__webpack_exports__, "recyclableRender", function () {
                    return _F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_chat_vue_vue_type_template_id_f16335a4___WEBPACK_IMPORTED_MODULE_0__["recyclableRender"];
                });

                /* harmony reexport (safe) */
                __webpack_require__.d(__webpack_exports__, "components", function () {
                    return _F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_chat_vue_vue_type_template_id_f16335a4___WEBPACK_IMPORTED_MODULE_0__["components"];
                });



                /***/
            }),

        /***/
        626:
            /*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
              !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/ceshi/lvshi/pages/index/chat.vue?vue&type=template&id=f16335a4& ***!
              \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
            /*! exports provided: render, staticRenderFns, recyclableRender, components */
            /***/
            (function (module, __webpack_exports__, __webpack_require__) {

                "use strict";
                __webpack_require__.r(__webpack_exports__);
                /* harmony export (binding) */
                __webpack_require__.d(__webpack_exports__, "render", function () {
                    return render;
                });
                /* harmony export (binding) */
                __webpack_require__.d(__webpack_exports__, "staticRenderFns", function () {
                    return staticRenderFns;
                });
                /* harmony export (binding) */
                __webpack_require__.d(__webpack_exports__, "recyclableRender", function () {
                    return recyclableRender;
                });
                /* harmony export (binding) */
                __webpack_require__.d(__webpack_exports__, "components", function () {
                    return components;
                });
                var components
                try {
                    components = {
                        lFile: function () {
                            return __webpack_require__.e( /*! import() | components/l-file/l-file */ "components/l-file/l-file").then(__webpack_require__.bind(null, /*! @/components/l-file/l-file.vue */ 1177))
                        }
                    }
                } catch (e) {
                    if (
                        e.message.indexOf("Cannot find module") !== -1 &&
                        e.message.indexOf(".vue") !== -1
                    ) {
                        console.error(e.message)
                        console.error("1. 排查组件名称拼写是否正确")
                        console.error(
                            "2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"
                        )
                        console.error(
                            "3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件"
                        )
                    } else {
                        throw e
                    }
                }
                var render = function () {
                    var _vm = this
                    var _h = _vm.$createElement
                    var _c = _vm._self._c || _h
                    var f0 =
                        _vm.message != "" ? _vm._f("timeStamp")(_vm.message[0].addtime) : null

                    var l0 = _vm.__map(_vm.message, function (item, index) {
                        var $orig = _vm.__get_orig(item)

                        var f1 =
                            index > 1 &&
                                _vm.message[index].addtime - _vm.message[index - 1].addtime > 300 ?
                                _vm._f("timeStamp")(_vm.message[index].addtime) :
                                null
                        var m0 =
                            item.userid_from == _vm.ls_id && item.msgtype == 1 && item.iswithdraw != 1 ?
                                _vm.replace_em(item.content) :
                                null
                        var m1 =
                            item.userid_from == _vm.ls_id &&
                                item.msgtype == 14 &&
                                item.iswithdraw != 1 ?
                                _vm.wenjian(item.content) :
                                null
                        var m2 =
                            item.userid_from != _vm.ls_id && item.msgtype == 1 && item.iswithdraw != 1 ?
                                _vm.replace_em(item.content) :
                                null
                        var m3 =
                            item.userid_from != _vm.ls_id &&
                                item.msgtype == 14 &&
                                item.iswithdraw != 1 ?
                                _vm.wenjian(item.content) :
                                null
                        return {
                            $orig: $orig,
                            f1: f1,
                            m0: m0,
                            m1: m1,
                            m2: m2,
                            m3: m3
                        }
                    })

                    _vm.$mp.data = Object.assign({}, {
                        $root: {
                            f0: f0,
                            l0: l0
                        }
                    })
                }
                var recyclableRender = false
                var staticRenderFns = []
                render._withStripped = true



                /***/
            }),

        /***/
        627:
            /*!********************************************************************!*\
              !*** E:/ceshi/lvshi/pages/index/chat.vue?vue&type=script&lang=js& ***!
              \********************************************************************/
            /*! no static exports found */
            /***/
            (function (module, __webpack_exports__, __webpack_require__) {

                "use strict";
                __webpack_require__.r(__webpack_exports__);
                /* harmony import */
                var _F_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_chat_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( /*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=script&lang=js& */ 628);
                /* harmony import */
                var _F_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_chat_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/ __webpack_require__.n(_F_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_chat_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__);
                /* harmony reexport (unknown) */
                for (var __WEBPACK_IMPORT_KEY__ in _F_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_chat_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__)
                    if (__WEBPACK_IMPORT_KEY__ !== 'default') (function (key) {
                        __webpack_require__.d(__webpack_exports__, key, function () {
                            return _F_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_chat_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[key];
                        })
                    }(__WEBPACK_IMPORT_KEY__));
                /* harmony default export */
                __webpack_exports__["default"] = (_F_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_chat_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default.a);

                /***/
            }),

        /***/
        628:
            /*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
              !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/ceshi/lvshi/pages/index/chat.vue?vue&type=script&lang=js& ***!
              \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
            /*! no static exports found */
            /***/
            (function (module, exports, __webpack_require__) {

                "use strict";
                /* WEBPACK VAR INJECTION */
                (function (uni) {
                    Object.defineProperty(exports, "__esModule", {
                        value: true
                    });
                    exports.default = void 0;
                    var _regenerator = _interopRequireDefault(__webpack_require__( /*! ./node_modules/@babel/runtime/regenerator */ 98));








































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































                    var _permission = _interopRequireDefault(__webpack_require__( /*! @/common/permission.js */ 101));

                    function _interopRequireDefault(obj) {
                        return obj && obj.__esModule ? obj : {
                            default: obj
                        };
                    }

                    function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
                        try {
                            var info = gen[key](arg);
                            var value = info.value;
                        } catch (error) {
                            reject(error);
                            return;
                        }
                        if (info.done) {
                            resolve(value);
                        } else {
                            Promise.resolve(value).then(_next, _throw);
                        }
                    }

                    function _asyncToGenerator(fn) {
                        return function () {
                            var self = this,
                                args = arguments;
                            return new Promise(function (resolve, reject) {
                                var gen = fn.apply(self, args);

                                function _next(value) {
                                    asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
                                }

                                function _throw(err) {
                                    asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
                                }
                                _next(undefined);
                            });
                        };
                    } //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    //
                    // const  recorderManager = uni.getRecorderManager();
                    // const recorderManager = swan.getRecorderManager()
                    // console.log(recorderManager,'00000')
                    const innerAudioContext = uni.createInnerAudioContext();
                    innerAudioContext.autoplay = true;
                    var emotion = function emotion() {
                        __webpack_require__.e( /*! require.ensure | components/bkhumor-emoji/index */ "components/bkhumor-emoji/index").then((function () {
                            return resolve(__webpack_require__( /*! @/components/bkhumor-emoji/index.vue */ 1184));
                        }).bind(null, __webpack_require__)).catch(__webpack_require__.oe);
                    };
                    var uParse = function uParse() {
                        Promise.all( /*! require.ensure | components/feng-parse/parse */[__webpack_require__.e("common/vendor"), __webpack_require__.e("components/feng-parse/parse")]).then((function () {
                            return resolve(__webpack_require__( /*! @/components/feng-parse/parse.vue */ 1163));
                        }).bind(null, __webpack_require__)).catch(__webpack_require__.oe);
                    };
                    var lfile = function lfile() {
                        __webpack_require__.e( /*! require.ensure | components/l-file/l-file */ "components/l-file/l-file").then((function () {
                            return resolve(__webpack_require__( /*! @/components/l-file/l-file.vue */ 1177));
                        }).bind(null, __webpack_require__)).catch(__webpack_require__.oe);
                    };
                    var _default = {
                        computed: {
                            intIntervalTime: function intIntervalTime() { // 用于显示整数的秒数
                                console.log(Math.round(this.intervalTime));
                                return Math.round(this.intervalTime);
                            }
                        },
                        created: function created() { },
                        components: {
                            emotion: emotion,
                            uParse: uParse,
                            lfile: lfile
                        },
                        onLoad: function onLoad(option) {
                            var _this = this;
                            this.ls_id = option.lawyerid; // 查看消息保留条数

                            this.$http.post({
                                url: '/mapi/index/getmessagecount'
                            }).then(function (res) {
                                _this.first_xiaoxi = res.data.messagecount;
                                _this.huoqu_xiaoxi_list();
                            });
                            this.huanying();
                            this.tishiyu_tip();
                            this.huoqu_type();
                            var self = this;
                            // recorderManager.onStop(function (res) {
                            //     console.log('recorder stop结束11111' + JSON.stringify(res));
                            //     self.voicePath = res.tempFilePath;
                            //     if (self.is_quxiao) {
                            //         console.log('已取消录音');
                            //     } else {
                            //         self.Audio2dataURL(res.tempFilePath);
                            //     }
                            // });
                            // this.huoqu_xiaoxi_list();
                            this.huqu_zhiwu(); // 获取用户信息
                            this.$http.post({
                                url: '/mapi/user/user'
                            }).then(function (res) {
                                _this.user = res.data.user;
                            });
                            this.$http.post({
                                url: '/mapi/lawyer/getshanchang'
                            }).then(function (res) {
                                _this.zhuanchang_arry = res.data.shanchang;
                                _this.huqu_ls_xinxi();
                            }); // 获取是否开启语音
                            this.$http.post({
                                url: '/mapi/index/getopenchat'
                            }).then(function (res) {
                                _this.is_kaiqi_yuyin = res.data.openchat;
                            }); // 进入这个页面的时候创建websocket连接【整个页面随时使用】
                            // this.connectSocketInit();
                        },
                        onShow: function onShow() { // this.$http
                            // 		.post({
                            // 			url: '/index/zixun/uploadfile'
                            // 		})
                            // 		.then(res => {
                            // 		});

                        },
                        onReady: function onReady() {
                            var that = this;
                            setTimeout(function () {
                                that.app_lianjie()
                            }, 1000);

                            this.recorderManager = swan.getRecorderManager();
                            this.recorderManager.onStart(() => {
                                console.log('开始')

                            });

                            this.recorderManager.onStop(res => {
                                this.voicePath = res.tempFilePath;
                                this.duration = res.duration;
                                console.log('jieshu', res)
                                if (that.is_quxiao) {
                                    console.log('已取消录音');
                                } else {
                                    console.log('发送录音');
                                    // that.Audio2dataURL(res.tempFilePath);
                                }
                            });


                        },
                        onHide: function onHide() { },
                        onUnload: function onUnload() {
                            uni.closeSocket(); // console.log('onUnload');
                            // this.time1 = '0';
                            // this.huoqu_xiaoxi_list()
                            this.$http.post({
                                url: '/mapi/consult/chatdeatils',
                                data: {
                                    page: 0,
                                    userid: this.ls_id
                                }
                            }).then(function (res) { });
                            var user_chat_list = uni.getStorageSync('user_chat_list'); //读取缓存
                            var that = this;
                            var is_cuzai = false;
                            if (user_chat_list) {
                                user_chat_list = JSON.parse(user_chat_list);
                                for (var i in user_chat_list) {
                                    if (user_chat_list[i].lawyer.userid == that.ls_id) {
                                        if (that.message[that.message.length - 1].addtime != that.is_last_msguptime) {
                                            console.log(user_chat_list[i].uptime, '11111111');
                                            console.log(that.is_last_msguptime);
                                            var xinxi = {
                                                lawyerid: that.ls_id,
                                                userid: that.user.userid,
                                                content: that.message[that.message.length - 1].content,
                                                msgtype: that.message[that.message.length - 1].msgtype,
                                                readnum: 0,
                                                lawyerreadnum: 0,
                                                uptime: that.message[that.message.length - 1].addtime,
                                                lawyer: {
                                                    userid: that.ls_xinxi.userid,
                                                    photourl: that.ls_xinxi.photourl,
                                                    nickname: that.ls_xinxi.nickname
                                                }
                                            };
                                            user_chat_list.splice(i, 1); //存在即删除
                                            user_chat_list.unshift(xinxi); // user_chat_list[i].content=that.message[that.message.length-1].content
                                            // user_chat_list[i].msgtype=that.message[that.message.length-1].msgtype
                                            uni.setStorageSync('user_chat_list', JSON.stringify(user_chat_list)); //设置缓存
                                            console.log('存在', user_chat_list[i]);
                                            console.log('重新设置');
                                            is_cuzai = true;
                                        } else {
                                            is_cuzai = true;
                                            user_chat_list[i].content = that.message[that.message.length - 1].content;
                                            user_chat_list[i].msgtype = that.message[that.message.length - 1].msgtype;
                                            user_chat_list[i].readnum = 0;
                                            uni.setStorageSync('user_chat_list', JSON.stringify(user_chat_list)); //设置缓存
                                            console.log('存在', user_chat_list[i]); // uni.removeStorageSync('user_chat_list');
                                        } // user_chat_list[i].readnum=0
                                    }
                                }
                            }
                            if (!is_cuzai) {
                                console.log('不存在');
                                uni.removeStorageSync('user_chat_list');
                            }
                            console.log(user_chat_list);
                            innerAudioContext.stop(); //暂停这个实例
                        },
                        data: function data() {
                            return {
                                title: '',
                                user: '',
                                bt_show: false,
                                url: uni.getStorageSync('img_url') + 'uniapp/bkhumor-emoji/',
                                img: '11.gif',
                                chat_txt: '',
                                changyong: '',
                                changyong_arry: ['你好,有什么可以帮助到您？', '客服的上班时间是早晨八点到晚上八点', '好的，有什么事情可以找客服帮您疑难解答'],
                                isShowEmj: false,
                                id: '100004',
                                img_url: uni.getStorageSync('img_url'),
                                message: [],
                                page: 0,
                                is_all: false,
                                ls_id: '',
                                dianhua: '',
                                chat_xinxi: '',
                                dian_num: '点击显示号码',
                                ls_xinxi: '',
                                is_fa: false,
                                socketTask: null, // 确保websocket是打开状态
                                is_open_socket: false,
                                zhuanchang_arry: '',
                                xinxi: '',
                                day: 0,
                                hour: '00',
                                minute: '00',
                                seconds: '00',
                                time1: '0',
                                chaoshi_item: '',
                                new_ls: '',
                                is_new: false,
                                is_chehui: false,
                                messageid: '',
                                canClick: true,
                                is_zuijin_chehui: false,
                                zuijin_txt: '',
                                bottom_tip: false,
                                on_yuyin: false,
                                is_yuyin: false,
                                is_quxiao: false,
                                clientX: '',
                                clientY: '',
                                recorderManager: {},
                                innerAudioContext: {},
                                voicePath: '',
                                intervalTime: 0,
                                isRecord: false,
                                tishiyu: '',
                                is_xiala: false,
                                yuyin_index: 0,
                                tips: '',
                                gettype: '',
                                localPath: '',
                                is_last_msguptime: '',
                                is_kaiqi_yuyin: 2,
                                is_first: true,
                                first_xiaoxi: '',
                                first_height: 0,
                                duration:0
                            };
                        }, //下拉刷新
                        onPullDownRefresh: function onPullDownRefresh() { // this.getList();
                        }, // stopPullDownRefresh:function(){
                        // },
                        methods: {
                            onPageScroll: function onPageScroll(res) {
                                var that = this;
                                if (res.scrollTop == 0) {
                                    this.is_xiala = true;
                                    if (this.is_all) {
                                        uni.showToast({
                                            title: '没有更多内容了',
                                            duration: 2000,
                                            icon: 'none'
                                        });
                                        uni.stopPullDownRefresh();
                                    } else {
                                        uni.showLoading({
                                            title: '加载中',
                                            mask: true
                                        });
                                        this.page++;
                                        this.huoqu_xiaoxi_list();
                                    }
                                }
                                var info = uni.createSelectorQuery().select('.chat_body');
                                info.boundingClientRect(function (data) { //data - 各种参数
                                    // 　　　  　console.log(data)  // 获取元素宽度
                                    that.first_height = data.height;
                                }).exec(); // console.log(res.scrollTop)
                            }, //上拉加载
                            onReachBottom: function onReachBottom() { // uni.showToast({
                                // 	title: '没有更多内容了',
                                // 	duration: 2000,
                                // 	icon: "none"
                                // });
                            },
                            call2: function call2(dianhua) {
                                uni.makePhoneCall({ // 手机号
                                    phoneNumber: dianhua + '', // 成功回调
                                    success: function success(res) {
                                        console.log('调用成功!');
                                    }, // 失败回调
                                    fail: function fail(res) {
                                        console.log('调用失败!');
                                    }
                                });
                            },
                            yuyin_chat: function yuyin_chat() { },
                            shipin_chat: function shipin_chat() { },

                            onOpenDoc(src) {
                                var url = this.img_url + src; /* 下载返回临时路径（退出应用失效） */
                                console.log(url);

                                swan.downloadFile({
                                    url: url,
                                    success: res => {
                                        swan.showToast({
                                            title: '已保存：' + res.tempFilePath,
                                            icon: 'none'
                                        });
                                        console.log(res.tempFilePath)


                                        swan.openDocument({
                                            filePath: res.tempFilePath,
                                            success: res => {
                                                console.log('openDocument success', res);
                                            },
                                            fail: err => {
                                                console.log('openDocument fail', err);
                                                swan.showToast({
                                                    title: '已下载-' + '暂不支持打开此格式文件',
                                                    icon: 'none'
                                                });
                                            }
                                        });
                                    },
                                    fail: err => {
                                        console.log('downloadFile fail', err);
                                    }
                                });






                            },
                            send_wenjian: function send_wenjian() {

                                // swan.uploadFile({
                                //     count: 1,
                                //     type: 'file',
                                //     success: function success(res) {
                                //         console.log(res);
                                //         var tempFilePaths = res.tempFilePaths;

                                //     }
                                // });
                                // swan.chooseMessageFile({
                                //     count: 1,
                                //     type: 'all',
                                //     success (res) {

                                //       console.log(res)
                                //     }
                                //   })




                                // var url = '/api/index/zixun/uploadfile';

                                // uni.uploadFile({
                                //     url: url,
                                //     filePath: filePath,
                                //     name: name,
                                //     header: {
                                //       'content-type': 'multipart/form-data'
                                //     },
                                //     formData:formData,    //请求额外的form data
                                //     success:function(res) {
                                //       console.log(res);
                                //       if(res.statusCode ==200){
                                //        typeof success == "function" && success(res.data);
                                //       }else{
                                //       typeof fail == "function" && fail(res.data);
                                //       }
                                //     },
                                //     fail: function (res) {
                                //       console.log(res);
                                //       typeof fail == "function" && fail(res.data);
                                //     }
                                //   })






                                /**
                                 * currentWebview: 当前webview
                                 * url：上传接口地址
                                 * name：附件key,服务端根据key值获取文件流，默认file,上传文件的key
                                 * header: 上传接口请求头
                                 */

                                // this.$refs.lFile.upload({
                                //     url: url, //替换为你的
                                //     // url: 'https://www.xhlvshi.com/index/zixun/uploadfile', //替换为你的
                                //     name: 'files' // header: {'Content-Type':'multipart/form-data'}
                                // });
                            },
                            onSuccess: function onSuccess(res) {
                                console.log('上传成功回调', JSON.stringify(res));
                                console.log(res.data.file); // uni.showToast({
                                // 	title: JSON.stringify(res),
                                // 	icon: 'none'
                                // })
                                this.send_wenjian_txt(res.data.file);
                            },
                            send_wenjian_txt: function send_wenjian_txt(localPath) {
                                var _this2 = this;
                                var that = this;
                                this.$http.post({
                                    url: '/push/gatewayworker/sendmessage.html',
                                    data: {
                                        userid_to: this.ls_id,
                                        msg: localPath,
                                        type: 14
                                    }
                                }).then(function (res) {
                                    console.log(res);
                                    if (res.code == 0) {
                                        var data = {
                                            content: localPath,
                                            msgtype: 14,
                                            photourl_form: _this2.user.photourl,
                                            messageid: res.data,
                                            addtime: new Date().getTime()
                                        };
                                        _this2.message.push(data);
                                        setTimeout(function () {
                                            uni.pageScrollTo({
                                                scrollTop: 99999,
                                                duration: 0
                                            });
                                        }, 100);
                                        var to = new Date(that.time1.replace(/-/g, '/'));
                                        var now = new Date();
                                        var time = to.getTime() - now.getTime();
                                        if (time < 0) {
                                            that.send_guoqi();
                                        }
                                    }
                                });
                            },
                            wenjian: function wenjian(str) {
                                str = str.substring(str.lastIndexOf('/') + 1);
                                return str; // console.log(str)
                            },
                            huanying: function huanying() {
                                var _this3 = this;
                                this.$http.post({
                                    url: '/mapi/index/getchatmessage'
                                }).then(function (res) {
                                    if (res.code == 0) {
                                        _this3.tishiyu = res.data;
                                    }
                                });
                            },
                            tishiyu_tip: function tishiyu_tip() {
                                var _this4 = this;
                                this.$http.post({
                                    url: '/mapi/index/tips'
                                }).then(function (res) {
                                    if (res.code == 0) {
                                        _this4.tips = res.data;
                                    }
                                });
                            },
                            huoqu_type: function huoqu_type() {
                                var _this5 = this;
                                this.$http.post({
                                    url: '/mapi/index/gettype'
                                }).then(function (res) {
                                    if (res.code == 0) {
                                        _this5.gettype = res.data.type;
                                    }
                                });
                            },
                            show_luyin: function show_luyin() {
                                var that = this;
                                this.isShowEmj = false;
                                this.bt_show = false;

                                swan.authorize({
                                    scope: 'scope.record',
                                    success(res) {
                                        // 用户已经同意小程序使用录音功能，后续调用 wx.startRecord 接口不会弹窗询问
                                        console.log(res);
                                        that.on_yuyin = true;
                                    },
                                    fail: function fail(err) {
                                        console.log(err);
                                        swan.showToast({
                                            title: '请开启麦克风权限',
                                            icon: 'none'
                                        });

                                    }
                                })

                            },

                            hide_luyin: function hide_luyin() {
                                this.on_yuyin = false;
                            }, // 点击长按录音
                            dian_luyin: function dian_luyin() {

                                console.log('录音')



                                var _this7 = this;
                                var that = this;
                                this.is_yuyin = true;
                                this.timer = setInterval(function () {
                                    _this7.intervalTime += 0.5;
                                    if (_this7.intervalTime >= 0.5 && !_this7.isRecord) { //如果用户录制的时间太短,就不会去开启录音, 因为有个bug: recorderManager.stop()在短时间内开启在关闭的话,实际上他还在不停地录音,不知道你们有没有遇到过
                                        console.log('开始录音');
                                        _this7.isRecord = true;
                                        _this7.intervalTime = 0;

                                        const options = {
                                            duration: 60000,
                                            sampleRate: 44100,
                                            numberOfChannels: 1,
                                            encodeBitRate: 96000,
                                            format: 'aac'
                                        };

                                        _this7.recorderManager.start(options);


                                    } // console.log(this.intervalTime)
                                    if (_this7.intervalTime >= 60) {
                                        uni.showToast({
                                            title: '不得超过60秒',
                                            duration: 2000,
                                            icon: 'none'
                                        });
                                        that.songkai();
                                    }
                                }, 500);
                            },
                            moveStop: function moveStop(e) {
                                console.log(e.touches[0].clientY);
                                if (e.touches[0].clientY < 650) {
                                    this.is_quxiao = true;
                                } else {
                                    this.is_quxiao = false;
                                }
                            },
                            songkai: function songkai() {
                                console.log('松开');
                                var _this8 = this;
                                var that = this;
                                console.log('songkai', this.is_quxiao, this.intervalTime);

                                if (this.is_quxiao) {
                                    console.log('已取消录音');
                                    that.recorderManager.stop();
                                    clearInterval(this.timer);
                                } else {
                                    if (this.intervalTime <= 0.5) {
                                        console.log('录音太短了!!!');
                                        that.recorderManager.stop();
                                        clearInterval(this.timer);
                                    }
                                    clearInterval(this.timer);
                                    if (this.isRecord) {
                                        setTimeout(function () {
                                            that.recorderManager.stop();
                                            _this8.isRecord = false; // var data = {
                                            // 	content: '',
                                            // 	msgtype: 12,
                                            // 	photourl_form: that.user.photourl
                                            // };
                                            // that.message.push(data);
                                            // setTimeout(() => {
                                            // 	uni.pageScrollTo({ scrollTop: 99999, duration: 0 });
                                            // }, 100);
                                            console.log(_this8.isRecord);
                                        }, 500); //延迟小段时间停止录音, 更好的体验
                                    }
                                }
                                this.is_yuyin = false;
                                this.is_quxiao = false;
                            },
                            playVoice: function playVoice(voicePath, index, duration) {
                                var that = this;
                                console.log('播放录音');
                                this.yuyin_index = index;
                                if (duration) {
                                    var daoji = Number(duration) * 1000;
                                } else {
                                    var daoji = 5 * 1000;
                                }
                                setTimeout(function () {
                                    that.yuyin_index = 0;
                                }, daoji);
                                console.log(this.img_url + voicePath);
                                innerAudioContext.src = this.img_url + voicePath;
                                innerAudioContext.play();
                            },
                            input_click: function input_click(e) { // this.bottom_tip =true;
                                this.isShowEmj = false;
                                this.bt_show = false;
                                setTimeout(function () {
                                    uni.pageScrollTo({
                                        scrollTop: 99999,
                                        duration: 0
                                    });
                                }, 100);
                            },
                            input_blur: function input_blur() {
                                var _this9 = this;
                                setTimeout(function () {
                                    _this9.bottom_tip = false;
                                }, 100);
                                console.log('失去焦点事件');
                            },
                            navigateBack: function navigateBack() {
                                uni.navigateBack();
                            },
                            send_zaixian: function send_zaixian() {
                                var _this10 = this;
                                var that = this;
                                this.$http.post({
                                    url: '/push/gatewayworker/sendzixun.html',
                                    data: {
                                        userid_to: this.ls_id,
                                        msg: '[在线咨询]',
                                        type: 4
                                    }
                                }).then(function (res) {
                                    if (res.code == 0) {
                                        var data = {
                                            content: '4',
                                            msgtype: 4,
                                            userid_from: that.ls_id,
                                            photourl_form: _this10.chat_xinxi.photourl,
                                            addtime: new Date().getTime()
                                        };
                                        that.message.push(data);
                                        setTimeout(function () {
                                            uni.pageScrollTo({
                                                scrollTop: 99999,
                                                duration: 0
                                            });
                                        }, 100);
                                    }
                                });
                            },
                            send_dianhua: function send_dianhua() {
                                var _this11 = this;
                                var that = this;
                                this.$http.post({
                                    url: '/push/gatewayworker/sendzixun.html',
                                    data: {
                                        userid_to: this.ls_id,
                                        msg: '[电话咨询]',
                                        type: 3
                                    }
                                }).then(function (res) {
                                    if (res.code == 0) {
                                        var data = {
                                            content: '3',
                                            msgtype: 3,
                                            photourl_form: _this11.chat_xinxi.photourl,
                                            userid_from: that.ls_id,
                                            addtime: new Date().getTime()
                                        };
                                        that.message.push(data);
                                        setTimeout(function () {
                                            uni.pageScrollTo({
                                                scrollTop: 99999,
                                                duration: 0
                                            });
                                        }, 100);
                                    }
                                });
                            },
                            send_guoqi: function send_guoqi() {
                                var _this12 = this;
                                var that = this;
                                this.$http.post({
                                    url: '/push/gatewayworker/sendzixun.html',
                                    data: {
                                        userid_to: this.ls_id,
                                        msg: '[服务过期]',
                                        type: 8
                                    }
                                }).then(function (res) {
                                    if (res.code == 0) {
                                        if (res.data.type != 1) {
                                            var data = {
                                                content: '8',
                                                msgtype: 8,
                                                photourl_form: _this12.chat_xinxi.photourl,
                                                userid_from: that.ls_id,
                                                addtime: new Date().getTime()
                                            };
                                            that.message.push(data);
                                            setTimeout(function () {
                                                uni.pageScrollTo({
                                                    scrollTop: 99999,
                                                    duration: 0
                                                });
                                            }, 100);
                                        }
                                    }
                                });
                            },
                            go_zhuye: function go_zhuye() {
                                uni.navigateTo({
                                    url: 'ls_zhuye?lawyerid=' + this.ls_id
                                });
                            },
                            zaixian_pay: function zaixian_pay(price, time) {
                                uni.navigateTo({
                                    url: 'pay?type=1&lawyerid=' + this.ls_id + '&time=' + time + '&pay_money=' + price
                                });
                            },
                            dh_pay: function dh_pay(price, time) {
                                uni.navigateTo({
                                    url: 'pay?type=2&lawyerid=' + this.ls_id + '&time=' + time + '&pay_money=' + price
                                });
                            },
                            huoqu_xiaoxi_list: function huoqu_xiaoxi_list() {
                                var _this13 = this;
                                var that = this;
                                this.$http.post({
                                    url: '/mapi/consult/chatdeatils',
                                    data: {
                                        page: this.page,
                                        userid: this.ls_id
                                    }
                                }).then(function (res) {
                                    _this13.title = res.data.user_to.nickname;
                                    _this13.dianhua = res.data.user_to.mobile;
                                    _this13.chat_xinxi = res.data.user_to;
                                    if (res.data.overtime.length > 0) {
                                        _this13.chaoshi_item = res.data.overtime;
                                        _this13.is_new = true;
                                    }
                                    var _loop = function _loop(key) {
                                        if (res.data.message[key].msgtype == 9) {
                                            console.log(key);
                                            _this13.$http.post({
                                                url: '/mapi/lawyer/lawyer',
                                                data: {
                                                    lawyerid: res.data.message[key].userid
                                                }
                                            }).then(function (ress) { // console.log(ress.data.lawyer, res.data.message[key]);
                                                // res.data.message[key-1].city = ress.data.lawyer.city;
                                                // res.data.message[key-1].province = ress.data.lawyer.province;
                                                // res.data.message[key-1].area = ress.data.lawyer.area;
                                                // res.data.message[key-1].photourl = ress.data.lawyer.photourl;
                                                // res.data.message[key-1].lvsuo = ress.data.lawyer.lvsuo;
                                                // res.data.message[key-1].nickname = ress.data.lawyer.nickname;
                                                // res.data.message[key-1].expertise1 = ress.data.lawyer.expertise1;
                                                // res.data.message[key-1].expertise2 = ress.data.lawyer.expertise2;
                                                // res.data.message[key-1].expertise3 = ress.data.lawyer.expertise3;
                                                res.data.message[key] = Object.assign(res.data.message[key], ress.data.lawyer);
                                            });
                                        }
                                        if (res.data.message[key].msgtype == 10 || res.data.message[key].msgtype == 11 || res.data.message[key].msgtype == 12) {
                                            _this13.$http.post({
                                                url: '/mapi/consult/red_envelope',
                                                data: {
                                                    redid: res.data.message[key].content,
                                                    userid: _this13.ls_id
                                                }
                                            }).then(function (ress) {
                                                console.log(ress);
                                                res.data.message[key] = Object.assign(res.data.message[key], ress.data.red_envelope);
                                                _this13.$forceUpdate();
                                            });
                                        } // 		if (res.data.message[key].msgtype == 13) {
                                        // 			console.log(key)
                                        // 			innerAudioContext.src =that.img_url+res.data.message[key].content;
                                        // 			innerAudioContext.onTimeUpdate(() => {
                                        // 			    // console.log(innerAudioContext.duration,key);
                                        // 				let shichang={
                                        // 					shitime:innerAudioContext.duration.toFixed(0)
                                        // 				}
                                        // 				res.data.message[key] = Object.assign(res.data.message[key], shichang);
                                        // 				this.$forceUpdate();
                                        // 			})
                                        // 		}
                                    };
                                    for (var key in res.data.message) {
                                        _loop(key);
                                    }
                                    _this13.message = res.data.message.concat(_this13.message);
                                    if (_this13.page == 0) {
                                        if (res.data.message.length < that.first_xiaoxi) {
                                            _this13.is_all = true;
                                        }
                                        _this13.is_last_msguptime = _this13.message[_this13.message.length - 1].addtime;
                                        console.log(_this13.is_last_msguptime);
                                    } else {
                                        if (res.data.message.length < 100) {
                                            _this13.is_all = true;
                                        }
                                    }
                                    if (!_this13.is_xiala) {
                                        setTimeout(function () {
                                            uni.pageScrollTo({
                                                scrollTop: 99999,
                                                duration: 0
                                            });
                                        }, 400);
                                    } else {
                                        setTimeout(function () {
                                            var info = uni.createSelectorQuery().select('.chat_body');
                                            info.boundingClientRect(function (data) { //data - 各种参数
                                                uni.pageScrollTo({
                                                    scrollTop: data.height - that.first_height,
                                                    duration: 0
                                                });
                                            }).exec();
                                        }, 1000);
                                    }
                                    that.time1 = res.data.shijian; // 倒计时
                                    var interval = setInterval(function () {
                                        var to = new Date(that.time1.replace(/-/g, '/'));
                                        var now = new Date();
                                        var time = to.getTime() - now.getTime();
                                        if (time < 0) {
                                            clearInterval(interval);
                                        } else {
                                            var day = parseInt(time / 1000 / 60 / 60 / 24);
                                            var hour = parseInt(time / 1000 / 60 / 60 % 24);
                                            var minute = parseInt(time / 1000 / 60 % 60);
                                            var seconds = parseInt(time / 1000 % 60);
                                            if (minute <= 9) minute = '0' + minute;
                                            if (seconds <= 9) seconds = '0' + seconds;
                                            that.day = day;
                                            that.hour = hour;
                                            that.minute = minute;
                                            that.seconds = seconds;
                                        }
                                    }, 1000);
                                    setTimeout(function () {
                                        uni.hideLoading();
                                    }, 1000);
                                });
                            },
                            huojiao: function huojiao() {
                                setTimeout(function () {
                                    uni.pageScrollTo({
                                        scrollTop: 99999,
                                        duration: 0
                                    });
                                }, 600);
                            },
                            shiqu: function shiqu() {
                                setTimeout(function () {
                                    uni.pageScrollTo({
                                        scrollTop: 99999,
                                        duration: 0
                                    });
                                }, 200);
                            },
                            app_lianjie: function app_lianjie() {
                                var that = this;
                                var url = that.$http.WebSocket_url;
                                uni.connectSocket({
                                    url: 'wss://' + url + ':3348',
                                    success: function success(data) {
                                        console.log('websocket连接成功', data);
                                    },
                                    fail: function fail(err) { },
                                    complete: function complete(res) { }
                                });
                                uni.onSocketOpen(function (res) {
                                    console.log('WebSocket连接已打开！', res);
                                });
                                uni.onSocketError(function (res) {
                                    console.log('WebSocket连接打开失败，请检查！');
                                });
                                uni.onSocketMessage(function (res) {
                                    console.log('收到服务器内容', res);
                                    var data = JSON.parse(res.data);
                                    if (data.type == 'init') {
                                        console.log('init');
                                        console.log('client_id', data.client_id);
                                        uni.request({
                                            url: that.$http.baseUrl + '/push/gatewayworker/bind',
                                            method: 'POST',
                                            header: {
                                                'Token': swan.getStorageSync("token")
                                            },
                                            data: {
                                                client_id: data.client_id
                                            },
                                            success: function success(resp) {
                                                console.log(resp, 'bind');
                                            },
                                            fail: function fail(resp) { }
                                        });
                                    } else if (data.type == 'say') {
                                        console.log('say');
                                        if (data.state) {
                                            if (data.state == 9) {
                                                if (data.userid) {
                                                    this.$http.post({
                                                        url: '/mapi/lawyer/lawyer',
                                                        data: {
                                                            lawyerid: data.userid
                                                        }
                                                    }).then(function (ress) {
                                                        var xiaoxi = {
                                                            photourl_form: data.userid_from_pic,
                                                            userid_to: data.userid_to,
                                                            photourl_to: data.userid_to_pic,
                                                            content: data.msg,
                                                            msgtype: data.state,
                                                            userid_from: that.ls_id,
                                                            city: ress.data.lawyer.city,
                                                            province: ress.data.lawyer.province,
                                                            area: ress.data.lawyer.area,
                                                            photourl: ress.data.lawyer.photourl,
                                                            lvsuo: ress.data.lawyer.lvsuo,
                                                            nickname: ress.data.lawyer.nickname,
                                                            expertise1: ress.data.lawyer.expertise1,
                                                            expertise2: ress.data.lawyer.expertise2,
                                                            expertise3: ress.data.lawyer.expertise3,
                                                            addtime: new Date().getTime()
                                                        };
                                                        that.message.push(xiaoxi);
                                                    });
                                                }
                                            }
                                            if (data.state == 10 || data.state == 11 || data.state == 12) {
                                                if (data.content) {
                                                    this.$http.post({
                                                        url: '/mapi/consult/red_envelope',
                                                        data: {
                                                            redid: data.content,
                                                            userid: that.ls_id
                                                        }
                                                    }).then(function (ress) {
                                                        var xiaoxi = {
                                                            photourl_form: data.userid_from_pic,
                                                            userid_to: data.userid_to,
                                                            photourl_to: data.userid_to_pic,
                                                            content: data.msg,
                                                            msgtype: data.state,
                                                            userid_from: that.ls_id,
                                                            money: ress.data.red_envelope.money,
                                                            is_pay: ress.data.red_envelope.is_pay,
                                                            information: ress.data.red_envelope.information,
                                                            paymode: ress.data.red_envelope.paymode,
                                                            type: ress.data.red_envelope.type,
                                                            addtime: new Date().getTime()
                                                        };
                                                        that.message.push(xiaoxi);
                                                    });
                                                }
                                            } else {
                                                var xiaoxi = {
                                                    photourl_form: data.userid_from_pic,
                                                    userid_to: data.userid_to,
                                                    photourl_to: data.userid_to_pic,
                                                    content: data.msg,
                                                    msgtype: data.state,
                                                    userid_from: that.ls_id,
                                                    addtime: new Date().getTime()
                                                };
                                                that.message.push(xiaoxi);
                                            }
                                            setTimeout(function () {
                                                uni.pageScrollTo({
                                                    scrollTop: 99999,
                                                    duration: 0
                                                });
                                            }, 200);
                                        }
                                    } else {
                                        console.log('else');
                                    }
                                });
                                uni.onSocketClose(function (res) {
                                    console.log('uniapp 已关闭！');
                                });
                            },
                            dianzan: function dianzan() {
                                uni.showToast({
                                    title: '点赞成功',
                                    duration: 2000
                                });
                            },
                            go_chat: function go_chat(lawyerid) {
                                uni.redirectTo({
                                    url: 'chat?lawyerid=' + lawyerid
                                });
                            },
                            huaqu_new_ls: function huaqu_new_ls(lawyerid) { // alert('777')
                                // this.$http
                                // 		.post({
                                // 			url: '/mapi/lawyer/lawyer',
                                // 			data: {
                                // 				lawyerid: lawyerid
                                // 			}
                                // 		})
                                // 		.then(res => {
                                // 			this.new_ls=res.data.lawyer
                                // 		});
                            },
                            huqu_ls_xinxi: function huqu_ls_xinxi() {
                                var _this14 = this;
                                this.$http.post({
                                    url: '/mapi/lawyer/lawyer',
                                    data: {
                                        lawyerid: this.ls_id
                                    }
                                }).then(function (res) {
                                    _this14.ls_xinxi = res.data.lawyer;
                                });
                            },
                            huqu_zhiwu: function huqu_zhiwu() {
                                var _this15 = this;
                                this.$http.post({
                                    url: '/mapi/lawyer/xinxi',
                                    data: {
                                        lawyerid: this.ls_id
                                    }
                                }).then(function (res) {
                                    _this15.xinxi = res.data.lawyer;
                                });
                            },
                            replace_em: function replace_em(str) {
                                str = str.replace(/\</g, '&lt;');
                                str = str.replace(/\>/g, '&gt;');
                                str = str.replace(/\n/g, '<br/>');
                                str = str.replace(/\[em_([0-9]*)\]/g, '<img src="../../static/bkhumor-emoji/$1.gif" border="0" style="width:40rpx"/>');
                                return str;
                            },
                            handleEmj: function handleEmj(i) {
                                console.log(i);
                                if (i == '[em_98]') { //匹配最后一个表情符号并删除。
                                    this.chat_txt = this.chat_txt.replace(/(\[[^\]]+\]|[\s\S])$/, '');
                                } else {
                                    this.chat_txt += i;
                                }
                            },
                            showEmj: function showEmj() {
                                this.on_yuyin = false;
                                var bool = !this.isShowEmj;
                                if (bool) {
                                    this.emojiIcon = 'cuIcon-keyboard';
                                    this.bt_show = false;
                                } else {
                                    this.emojiIcon = 'cuIcon-emoji';
                                }
                                this.isShowEmj = bool;
                                this.$emit('show');
                            },
                            bianji: function bianji() {
                                this.chat_txt = this.zuijin_txt;
                            },
                            changan: function changan(messageid, txt) {
                                if (txt) {
                                    this.zuijin_txt = txt;
                                } else {
                                    this.zuijin_txt = '';
                                }
                                console.log(messageid);
                                this.messageid = messageid;
                                this.is_chehui = true;
                            },
                            che_queding: function che_queding() {
                                var _this16 = this;
                                this.$http.post({
                                    url: '/index/zixun/withdraw',
                                    data: {
                                        messageid: this.messageid
                                    }
                                }).then(function (res) {
                                    if (res.code == 0) {
                                        uni.showToast({
                                            title: '消息已撤回',
                                            duration: 2000
                                        });
                                        _this16.message.forEach(function (item, index, array) {
                                            if (item.messageid == _this16.messageid) {
                                                _this16.message.splice(index, 1);
                                            }
                                        });
                                        _this16.is_chehui = false;
                                        if (_this16.zuijin_txt != '') {
                                            _this16.is_zuijin_chehui = true;
                                        } else {
                                            _this16.is_zuijin_chehui = false;
                                            _this16.chat_txt = '';
                                        }
                                    }
                                });
                            },
                            che_quxiao: function che_quxiao() {
                                this.is_chehui = false;
                            },
                            jia: function jia() {
                                this.bt_show = !this.bt_show;
                                this.isShowEmj = false;
                                this.on_yuyin = false;
                            }, // input_change(){
                            // 	if(this.chat_txt==''){
                            // 		this.is_fa=false
                            // 	}else{
                            // 		this.is_fa=true
                            // 	}
                            // },
                            Audio2dataURL: function Audio2dataURL(path) {
                                var that = this;

                                this.fileSystemManager = swan.getFileSystemManager();

                                this.fileSystemManager.readFile({
                                    filePath: path,
                                    encoding: 'base64',
                                    success: res => {
                                        that.up_luyin(res.data);
                                        console.log('readFile success成功', res);
                                    },
                                    fail: err => {
                                        swan.showToast({
                                            title: JSON.stringify(err),
                                            icon: 'none'
                                        });
                                        console.log('readFile fail 异常', err);
                                    }
                                });










                                // plus.io.resolveLocalFileSystemURL(path, function (entry) {
                                //     entry.file(function (file) {
                                //         var reader = new plus.io.FileReader();
                                //         reader.onloadend = function (e) {
                                //             console.log(e.target.result);
                                //             that.up_luyin(e.target.result);
                                //              // that.dataURL2Audio(e.target.result, function(entry){
                                //             // 	console.log(entry,'entry')
                                //             //        var toURL = entry.toURL();
                                //             //        // 播放音频
                                //             //        // playAudio(toURL);
                                //             //    })
                                //         };
                                //         reader.readAsDataURL(file);
                                //     }, function (e) {
                                //         console.log('读写出现异常: ' + e.message);
                                //     });
                                // });
                            },
                            dataURL2Audio: function dataURL2Audio(base64Str, callback) {
                                var base64Str = base64Str.replace('data:audio/amr;base64,', '');
                                var audioName = new Date().valueOf() + '.amr';
                                plus.io.requestFileSystem(plus.io.PRIVATE_DOC, function (fs) {
                                    fs.root.getFile(audioName, {
                                        create: true
                                    }, function (entry) { // 获得平台绝对路径
                                        var fullPath = entry.fullPath;
                                        if (mui.os.android) { // 读取音频
                                            var Base64 = plus.android.importClass('android.util.Base64');
                                            var FileOutputStream = plus.android.importClass('java.io.FileOutputStream');
                                            try {
                                                var out = new FileOutputStream(fullPath);
                                                var bytes = Base64.decode(base64Str, Base64.DEFAULT);
                                                console.log(bytes, 'bytes');
                                                out.write(bytes);
                                                out.close();
                                                // 回调
                                                callback && callback(entry);
                                            } catch (e) {
                                                console.log(e.message);
                                            }
                                        } else if (mui.os.ios) {
                                            var NSData = plus.ios.importClass('NSData');
                                            var nsData = new NSData();
                                            nsData = nsData.initWithBase64EncodedStringoptions(base64Str, 0);
                                            if (nsData) {
                                                nsData.plusCallMethod({
                                                    writeToFile: fullPath,
                                                    atomically: true
                                                });
                                                plus.ios.deleteObject(nsData);
                                            }
                                            // 回调
                                            callback && callback(entry);
                                        }
                                    });
                                });
                            },

                            up_luyin: function up_luyin(base64) {
                                console.log('up_luyin');

                                var urlrep = 'data:audio/mp3;base64,'+base64;

                                var that = this;
                                that.$http.
                                    post({
                                        url: '/index/zixun/uploadaudiomessage',
                                        data: {
                                            audio: urlrep
                                        }
                                    }).


                                    then(function (res) {
                                        console.log(res);
                                        if (res.code == 0) {
                                            that.send_luyin(res.data.audio);
                                        }
                                    });
                            },
                            send_luyin: function send_luyin(audio) {
                                var _this17 = this;
                                console.log('send1111111111');
                                var that = this;
                                var duration = Math.round(this.intervalTime);

                                this.$http.
                                    post({
                                        url: '/push/gatewayworker/sendmessage.html',
                                        data: {
                                            userid_to: this.ls_id,
                                            msg: audio,
                                            type: 13,
                                            duration: duration
                                        }
                                    }).


                                    then(function (res) {
                                        console.log(res);
                                        if (res.code == 0) {
                                            var data = {
                                                content: audio,
                                                msgtype: 13,
                                                photourl_form: _this17.user.photourl,
                                                messageid: res.data,
                                                duration: duration,
                                                addtime: new Date().getTime()
                                            };

                                            _this17.message.push(data);
                                            setTimeout(function () {
                                                uni.pageScrollTo({
                                                    scrollTop: 99999,
                                                    duration: 0
                                                });
                                            }, 100);
                                            var to = new Date(that.time1.replace(/-/g, '/'));
                                            var now = new Date();
                                            var time = to.getTime() - now.getTime();
                                            if (time < 0) {
                                                that.send_guoqi();
                                            }
                                        }
                                    });
                            },
                            up_img: function up_img() {
                                var that = this;
                                uni.chooseImage({
                                    success: function success(res) {
                                        console.log(res);


                                        var tempFilePaths = res.tempFilePaths;
                                        for (var x = 0; x < res.tempFilePaths.length; x++) {
                                            uni.getFileSystemManager().readFile({
                                                filePath: res.tempFilePaths[x], //选择图片返回的相对路径
                                                encoding: "base64",//这个是很重要的
                                                success: res => { //成功的回调
                                                    //返回base64格式
                                                    //  console.log('data:image/png;base64,' + res.data)
                                                    var img_base = 'data:image/png;base64,' + res.data
                                                    that.sendbase(img_base)

                                                }
                                            })
                                        }




                                        // that.zhiye_zhao = res.tempFilePaths[0];
                                        // that.urlTobase64(res.tempFilePaths[0])
                                    }
                                });

                            },
                            sendbase: function base64(img_base) {
                                var that = this;
                                this.$http.post({
                                    url: '/index/zixun/uploadimgmessage',
                                    data: {
                                        img: img_base
                                    }
                                }).then(function (res) {

                                    that.send_img(res.data.img)
                                });

                            },
                            send_img: function send_img(img) {
                                var _this18 = this;
                                var that = this;
                                this.$http.
                                    post({
                                        url: '/push/gatewayworker/sendmessage.html',
                                        data: {
                                            userid_to: this.ls_id,
                                            msg: img,
                                            type: 2
                                        }
                                    }).


                                    then(function (res) {
                                        if (res.code == 0) {
                                            var data = {
                                                content: img,
                                                msgtype: 2,
                                                photourl_form: _this18.user.photourl,
                                                messageid: res.data,
                                                addtime: new Date().getTime()
                                            };

                                            _this18.message.push(data);
                                            setTimeout(function () {
                                                uni.pageScrollTo({
                                                    scrollTop: 99999,
                                                    duration: 0
                                                });
                                            }, 100);
                                            var to = new Date(that.time1.replace(/-/g, '/'));
                                            var now = new Date();
                                            var time = to.getTime() - now.getTime();
                                            if (time < 0) {
                                                that.send_guoqi();
                                            }
                                        }
                                    });
                            },
                            send: function send() {
                                var that = this;
                                if (this.chat_txt == '') {
                                    uni.showToast({
                                        title: '请输入内容',
                                        duration: 2000,
                                        icon: 'none'
                                    });

                                    return false;
                                }
                                if (this.canClick) {
                                    this.canClick = false;
                                    this.send_txt();
                                    setTimeout(function () {
                                        that.canClick = true;
                                    }, 1000);
                                } else {
                                    uni.showToast({
                                        title: '请稍后发送',
                                        duration: 2000,
                                        icon: 'none'
                                    });

                                }
                            },
                            send_txt: function send_txt() {
                                var _this19 = this;
                                var that = this;
                                console.log(this.chat_txt);
                                var txt = this.replace_em(this.chat_txt);
                                if (txt == '') {
                                    uni.showToast({
                                        title: '请输入内容',
                                        duration: 2000,
                                        icon: 'none'
                                    });

                                    return false;
                                }

                                this.$http.
                                    post({
                                        url: '/push/gatewayworker/sendmessage.html',
                                        data: {
                                            userid_to: this.ls_id,
                                            msg: this.chat_txt,
                                            type: 1
                                        }
                                    }).


                                    then(function (res) {
                                        if (res.code == 0) {
                                            _this19.chat_txt = '';
                                            _this19.is_zuijin_chehui = false;
                                            var data = {
                                                content: txt,
                                                msgtype: 1,
                                                photourl_form: _this19.user.photourl,
                                                messageid: res.data,
                                                addtime: new Date().getTime()
                                            };

                                            _this19.message.push(data);
                                            setTimeout(function () {
                                                uni.pageScrollTo({
                                                    scrollTop: 99999,
                                                    duration: 0
                                                });
                                            }, 100);

                                            var to = new Date(that.time1.replace(/-/g, '/'));
                                            var now = new Date();
                                            var time = to.getTime() - now.getTime();
                                            if (time < 0) {
                                                that.send_guoqi();
                                            }
                                        }
                                    });
                            },
                            call: function call() {
                                uni.makePhoneCall({
                                    phoneNumber: this.dianhua + '',
                                    success: function success(res) {
                                        console.log('调用成功!');
                                    },
                                    fail: function fail(res) {
                                        console.log(res);
                                        console.log('调用失败!');
                                    }
                                });

                            },

                            changyong_change: function changyong_change(data) {
                                this.changyong = this.changyong_arry[data.detail.value];
                                console.log(this.changyong);
                            },
                            pingjia: function pingjia() {
                                uni.navigateTo({
                                    url: 'pingjia?lawyerid=' + this.chat_xinxi.userid
                                });

                            },
                            tan_hide: function tan_hide() {
                                this.isShowEmj = false;
                                this.bt_show = false;
                            },
                            // 显示电话号码
                            xianshi: function xianshi() {
                                this.dian_num = this.dianhua;
                            },
                            // 去付费
                            fufei: function fufei(type) {
                                uni.navigateTo({
                                    url: 'pay?lawyerid=' + this.ls_id + '&type=' + type
                                });

                            },
                            go_zixun: function go_zixun(type) {
                                uni.navigateTo({
                                    url: 'pay?lawyerid=' + this.ls_id + '&type=' + type
                                });

                            },
                            clickImg: function clickImg(img) {
                                uni.previewImage({
                                    urls: ['' + img], //需要预览的图片http链接列表，多张的时候，url直接写在后面就行了
                                    current: '', // 当前显示图片的http链接，默认是第一个
                                    success: function success(res) { },
                                    fail: function fail(res) { },
                                    complete: function complete(res) { }
                                });

                            },
                            connectSocketInit: function connectSocketInit() {
                                var that = this;
                                var url = window.location.host;
                                var ws = new WebSocket('wss://' + url + ':3348');
                                ws.onopen = function (evt) {
                                    console.log('Connection open ...');
                                    // ws.send("你好");
                                };
                                ws.onmessage = function (evt) {
                                    console.log('Received Message: ' + evt.data);
                                    // json数据转换成js对象
                                    var data = JSON.parse(evt.data);

                                    if (data.type == 'init') {
                                        console.log('init');
                                        console.log('client_id', data.client_id);

                                        uni.request({
                                            url: that.$http.baseUrl + '/push/gatewayworker/bind',
                                            method: 'POST',
                                            data: {
                                                client_id: data.client_id
                                            },

                                            success: function success(resp) {
                                                console.log(resp, 'bind');
                                            },
                                            fail: function fail(resp) { }
                                        });

                                    } else if (data.type == 'say') {
                                        console.log('say');
                                        if (data.state) {
                                            if (data.state == 9) {
                                                this.$http.
                                                    post({
                                                        url: '/mapi/lawyer/lawyer',
                                                        data: {
                                                            lawyerid: data.userid
                                                        }
                                                    }).


                                                    then(function (ress) {
                                                        var xiaoxi = {
                                                            photourl_form: data.userid_from_pic,
                                                            userid_to: data.userid_to,
                                                            photourl_to: data.userid_to_pic,
                                                            content: data.msg,
                                                            msgtype: data.state,
                                                            userid_from: that.ls_id,
                                                            city: ress.data.lawyer.city,
                                                            province: ress.data.lawyer.province,
                                                            area: ress.data.lawyer.area,
                                                            photourl: ress.data.lawyer.photourl,
                                                            lvsuo: ress.data.lawyer.lvsuo,
                                                            nickname: ress.data.lawyer.nickname,
                                                            expertise1: ress.data.lawyer.expertise1,
                                                            expertise2: ress.data.lawyer.expertise2,
                                                            expertise3: ress.data.lawyer.expertise3,
                                                            addtime: new Date().getTime()
                                                        };

                                                        that.message.push(xiaoxi);
                                                    });
                                            }
                                            if (data.state == 10 || data.state == 11 || data.state == 12) {
                                                if (data.content) {
                                                    this.$http.
                                                        post({
                                                            url: '/mapi/consult/red_envelope',
                                                            data: {
                                                                redid: data.content,
                                                                userid: that.ls_id
                                                            }
                                                        }).


                                                        then(function (ress) {
                                                            var xiaoxi = {
                                                                photourl_form: data.userid_from_pic,
                                                                userid_to: data.userid_to,
                                                                photourl_to: data.userid_to_pic,
                                                                content: data.msg,
                                                                msgtype: data.state,
                                                                userid_from: that.ls_id,
                                                                money: ress.data.red_envelope.money,
                                                                is_pay: ress.data.red_envelope.is_pay,
                                                                information: ress.data.red_envelope.information,
                                                                paymode: ress.data.red_envelope.paymode,
                                                                type: ress.data.red_envelope.type,
                                                                addtime: new Date().getTime()
                                                            };

                                                            that.message.push(xiaoxi);
                                                        });
                                                }
                                            } else {
                                                var xiaoxi = {
                                                    photourl_form: data.userid_from_pic,
                                                    userid_to: data.userid_to,
                                                    photourl_to: data.userid_to_pic,
                                                    content: data.msg,
                                                    msgtype: data.state,
                                                    userid_from: that.ls_id,
                                                    addtime: new Date().getTime()
                                                };

                                                that.message.push(xiaoxi);
                                            }

                                            setTimeout(function () {
                                                uni.pageScrollTo({
                                                    scrollTop: 99999,
                                                    duration: 0
                                                });
                                            }, 100);
                                        }
                                    } else {
                                        console.log('else');
                                    }
                                };
                                ws.onclose = function (evt) {
                                    console.log('Connection closed.');
                                };
                                ws.onerror = function (evt) {
                                    console.log('WebSocketError!', evt);
                                };
                            },
                            guanbi: function guanbi() {
                                this.is_new = false;
                            },
                            fa_hongbao: function fa_hongbao() {
                                uni.navigateTo({
                                    url: 'hongbao?lawyerid=' + this.chat_xinxi.userid
                                });

                            },
                            go_fuwufei: function go_fuwufei(redid, addtime) {
                                uni.navigateTo({
                                    url: 'fuwufei?lawyerid=' + this.chat_xinxi.userid + '&redid=' + redid + '&addtime=' + addtime
                                });

                            }
                        },

                        filters: {
                            timeStamp: function timeStamp(value) {
                                if (value == null) {
                                    return 'null';
                                }
                                var i = (value + '').length;
                                while (i++ < 13) {
                                    value = value + '0';
                                }
                                value = Number(value);
                                var date = new Date(value);
                                //date.setTime(value);
                                var month = date.getMonth() + 1;
                                var hours = date.getHours();
                                if (hours < 10) hours = '0' + hours;
                                var minutes = date.getMinutes();
                                if (minutes < 10) minutes = '0' + minutes;
                                var time = date.getFullYear() + '-' + month + '-' + date.getDate() + ' ' + hours + ':' + minutes;
                                return time;
                            }
                        }
                    };
                    exports.default = _default;
                    /* WEBPACK VAR INJECTION */
                }.call(this, __webpack_require__( /*! ./node_modules/@dcloudio/uni-mp-baidu/dist/index.js */ 1)["default"]))

                /***/
            }),

        /***/
        629:
            /*!****************************************************************************!*\
              !*** E:/ceshi/lvshi/pages/index/chat.vue?vue&type=style&index=0&lang=css& ***!
              \****************************************************************************/
            /*! no static exports found */
            /***/
            (function (module, __webpack_exports__, __webpack_require__) {

                "use strict";
                __webpack_require__.r(__webpack_exports__);
                /* harmony import */
                var _F_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_F_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_F_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_chat_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( /*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=style&index=0&lang=css& */ 630);
                /* harmony import */
                var _F_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_F_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_F_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_chat_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/ __webpack_require__.n(_F_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_F_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_F_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_chat_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__);
                /* harmony reexport (unknown) */
                for (var __WEBPACK_IMPORT_KEY__ in _F_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_F_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_F_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_chat_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__)
                    if (__WEBPACK_IMPORT_KEY__ !== 'default') (function (key) {
                        __webpack_require__.d(__webpack_exports__, key, function () {
                            return _F_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_F_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_F_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_chat_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__[key];
                        })
                    }(__WEBPACK_IMPORT_KEY__));
                /* harmony default export */
                __webpack_exports__["default"] = (_F_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_F_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_F_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_F_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_chat_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default.a);

                /***/
            }),

        /***/
        630:
            /*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
              !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/ceshi/lvshi/pages/index/chat.vue?vue&type=style&index=0&lang=css& ***!
              \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
            /*! no static exports found */
            /***/
            (function (module, exports, __webpack_require__) {

                // extracted by mini-css-extract-plugin
                if (false) {
                    var cssReload;
                }


                /***/
            })

    },
    [
        [623, "common/runtime", "common/vendor"]
    ]
]);