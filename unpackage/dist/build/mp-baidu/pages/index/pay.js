(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/pay"],{1435:function(t,i,n){"use strict";n.r(i);var a=n("aa48"),e=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(i,t,(function(){return a[t]}))}(o);i["default"]=e.a},5376:function(t,i,n){"use strict";(function(t){n("0743");a(n("66fd"));var i=a(n("d7a4"));function a(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,n("5486")["createPage"])},"68ab":function(t,i,n){},a3a2:function(t,i,n){"use strict";var a;n.d(i,"b",(function(){return e})),n.d(i,"c",(function(){return o})),n.d(i,"a",(function(){return a}));var e=function(){var t=this,i=t.$createElement;t._self._c},o=[]},a805:function(t,i,n){"use strict";var a=n("68ab"),e=n.n(a);e.a},aa48:function(t,i,n){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=function(){Promise.all([n.e("common/vendor"),n.e("components/wangding-pickerAddress/wangding-pickerAddress")]).then(function(){return resolve(n("c58d"))}.bind(null,n)).catch(n.oe)},e={data:function(){return{zhifu:"2",lawyerid:"",img_url:t.getStorageSync("img_url"),lvshi:"",neirong:"",zhuanchang_arry:[],type_arry:[],type:"",consultid:"",information:"",typeid:"",fenlei:[],phone:"",xiamgmu:"",shichang:"",leixing:"",zixun_xinxi:"",laiyuan:1,pay_money:0,time:"",apppaytype:"",is_click:!0}},components:{pickerAddress2:a},created:function(){},onLoad:function(t){var i=this;this.lawyerid=t.lawyerid,t.type&&(this.type=t.type),t.pay_money&&(this.pay_money=t.pay_money),t.time&&(this.time=t.time),t.consultid?(this.laiyuan=2,this.consultid=t.consultid,this.$http.post({url:"/mapi/index/gettype"}).then((function(t){i.fenlei=t.data.type;var n=[];for(var a in t.data.type)n.push(t.data.type[a]);i.type_arry=n,i.diangdan_xinxi()}))):(this.laiyuan=1,this.$http.post({url:"/mapi/index/gettype"}).then((function(t){i.fenlei=t.data.type;var n=[];for(var a in t.data.type)n.push(t.data.type[a]);i.type_arry=n}))),this.$http.post({url:"/mapi/lawyer/getshanchang"}).then((function(t){i.zhuanchang_arry=t.data.shanchang,i.huoqu_lvshi()})),this.$http.post({url:"/mapi/user/user"}).then((function(t){i.phone=t.data.user.mobile,i.user=t.data.user})),this.huoqu_pay_fs()},methods:{navigateBack:function(){t.navigateBack()},huoqu_pay_fs:function(){var t=this;this.$http.post({url:"/mapi/index/getapppaytype"}).then((function(i){0==i.code&&(t.apppaytype=i.data.zhan.apppaytype)}))},diangdan_xinxi:function(){var t=this;this.$http.post({url:"/mapi/consult/consult_xq",data:{consultid:this.consultid}}).then((function(i){t.zixun_xinxi=i.data.consult,t.neirong=i.data.consult.information,t.pay_money=i.data.consult.paymoney,t.typeid=i.data.consult.typeid,t.time=i.data.consult.zixunshicahng,1==i.data.consult.zixunshicahng?t.time="20分钟":24==i.data.consult.zixunshicahng?t.time="1天":72==i.data.consult.zixunshicahng?t.time="3天":720==i.data.consult.zixunshicahng?t.time="1个月":t.time=i.data.consult.zixunshicahng+"小时","hetong_shenhe"==i.data.consult.baojiamode&&(t.time="合同审核",t.type=3),"hetong_daixie"==i.data.consult.baojiamode&&(t.time="代写合同",t.type=3),"hetong_wenshu"==i.data.consult.baojiamode&&(t.time="代写文书",t.type=3),"lvshi_huijian"==i.data.consult.baojiamode&&(t.time="律师会见",t.type=4),"lvshihan"==i.data.consult.baojiamode&&(t.time="发律师函",t.type=4),"anjianzhidao"==i.data.consult.baojiamode&&(t.time="案件指导",t.type=4),"jianmian"==i.data.consult.baojiamode&&(t.time="1次",t.type=0),t.leixing=t.fenlei[i.data.consult.typeid].typename}))},huoqu_lvshi:function(){var t=this;this.$http.post({url:"/mapi/lawyer/lawyer",data:{lawyerid:this.lawyerid}}).then((function(i){0==i.code&&(t.lvshi=i.data.lawyer)}))},save:function(){var i=this;if(""==this.phone)return t.showToast({title:"请填写手机号码",duration:2e3,icon:"none"}),!1;if(""==this.neirong)return t.showToast({title:"请输入咨询内容",duration:2e3,icon:"none"}),!1;if(""==this.typeid)return t.showToast({title:"请选择咨询类别",duration:2e3,icon:"none"}),!1;if(0==this.type)var n="见面咨询";else if(1==this.type)n="在线咨询";else if(2==this.type)n="电话咨询";else if(3==this.type)n="合同文书";else if(4==this.type)n="诉讼委托";if(console.log(this.type,this.neirong,this.phone,this.typeid,this.time),1==this.laiyuan)var a=this.lawyerid;else a="";return this.$http.post({url:"/index/consult/addconsultpay",data:{information:this.neirong,typeid:this.typeid,phone:this.phone,shichang:this.time,xiangmu:n,lawyerid:a,consultid:this.consultid}}).then((function(t){0==t.code&&(2==i.zhifu?1==i.apppaytype&&i.zfb_pay(t.data.consultid):3==i.zhifu&&i.yue_pay(t.data.consultid))})),!1},zfb_pay:function(i){var n=this;this.is_click?(n.is_click=!1,setTimeout((function(){n.is_click=!0}),3e3),this.$http.post({url:"/mapi/consult/payh5",data:{consultid:i}}).then((function(t){t.code}))):t.showToast({title:"稍后操作",duration:2e3,icon:"none"})},app_pay:function(i){var n=this;this.$http.post({url:"/mapi/consult/pay",data:{consultid:i}}).then((function(i){0==i.code&&t.requestPayment({provider:"alipay",orderInfo:i.data.response,success:function(i){console.log("success:"+JSON.stringify(i)),t.showToast({title:"支付成功",duration:2e3}),setTimeout((function(){1==n.type?t.navigateTo({url:"zixun_jilu"}):2==n.type?t.navigateTo({url:"dianhua_jilu"}):t.navigateTo({url:"qita_jilu"})}),2e3)},fail:function(i){t.showToast({title:"支付失败",duration:2e3,icon:"none"}),console.log("fail:"+JSON.stringify(i))}})}))},yue_pay:function(i){var n=this;this.$http.post({url:"/index/consult/accountpay",data:{consultid:i}}).then((function(i){0==i.code&&(t.showToast({title:"支付成功",duration:2e3}),setTimeout((function(){1==n.type?t.navigateTo({url:"zixun_jilu"}):2==n.type?t.navigateTo({url:"dianhua_jilu"}):t.navigateTo({url:"qita_jilu"})}),2e3))}))},paixu_change:function(t){this.xiamgmu=this.xiangmu_arry[t.detail.value],console.log(this.xiamgmu)},shichang_change:function(t){this.shichang=this.shichang_arry[t.detail.value],console.log(this.shichang)},zhuanchang_change:function(t){this.leixing=this.type_arry[t.detail.value].typename,this.typeid=this.type_arry[t.detail.value].typeid,console.log(this.typeid)},guoqu_zixun_xq:function(){this.$http.post({url:"/mapi/consult/zixun_xq",data:{consultid:this.consultid}}).then((function(t){t.code}))},radio:function(t){this.zhifu=t}}};i.default=e}).call(this,n("5486")["default"])},d7a4:function(t,i,n){"use strict";n.r(i);var a=n("a3a2"),e=n("1435");for(var o in e)"default"!==o&&function(t){n.d(i,t,(function(){return e[t]}))}(o);n("a805");var u,s=n("f0c5"),c=Object(s["a"])(e["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],u);i["default"]=c.exports}},[["5376","common/runtime","common/vendor"]]]);