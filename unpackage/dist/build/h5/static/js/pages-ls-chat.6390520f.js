(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-ls-chat"],{"304a":function(t,e,i){"use strict";i.r(e);var a=i("bbd4"),o=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},"6af5":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTIzNDk4ODUxNzJBMTFFQkE5RjhFQzA2NzU3MzdBQ0IiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTIzNDk4ODYxNzJBMTFFQkE5RjhFQzA2NzU3MzdBQ0IiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1MjM0OTg4MzE3MkExMUVCQTlGOEVDMDY3NTczN0FDQiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1MjM0OTg4NDE3MkExMUVCQTlGOEVDMDY3NTczN0FDQiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ps8as80AAAgtSURBVHja7J1ZaFRX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"},"6c8e":function(t,e,i){var a=i("24fb"),o=i("1de5"),n=i("8e81"),s=i("9822");e=a(!1);var c=o(n),l=o(s);e.push([t.i,'.head[data-v-54fe3ed1]{border-bottom:%?2?% solid #e8e8e8}.time[data-v-54fe3ed1]{margin:%?24?% auto;text-align:center;width:%?300?%;height:%?28?%;background-color:#f6f6f6;border-radius:%?14?%;text-align:center;line-height:%?28?%}.chat_list[data-v-54fe3ed1]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start;margin-bottom:%?30?%}.chat_list .tx[data-v-54fe3ed1]{width:%?94?%;height:%?94?%;border-radius:100%}.chat_left .tx[data-v-54fe3ed1]{margin-right:%?20?%}.chat_body[data-v-54fe3ed1]{padding:0 %?30?% %?100?%;overflow:auto}.chat_body_jia[data-v-54fe3ed1]{padding-bottom:%?354?%}.chat_left_txt[data-v-54fe3ed1]{max-width:%?470?%;border:solid %?2?% #d9d9d9;position:relative;padding:%?10?% %?20?%;border-radius:%?10?%;top:%?20?%;word-break:break-all}.chat_left_txt[data-v-54fe3ed1]::before{content:"";display:inline-block;position:absolute;top:%?24?%;left:%?-10?%;width:%?10?%;height:%?16?%;background:url('+c+') no-repeat;background-size:100% 100%}.chat_right_txt uni-image[data-v-54fe3ed1],\r\n.chat_left_txt uni-image[data-v-54fe3ed1]{max-width:100%;max-height:%?400?%}.chat_right_txt[data-v-54fe3ed1]{max-width:%?470?%;background-color:#f6f6f6;position:relative;padding:%?10?% %?20?%;border-radius:%?10?%;top:%?20?%;word-break:break-all}.chat_right_txt[data-v-54fe3ed1]::before{content:"";display:inline-block;position:absolute;top:%?24?%;right:%?-10?%;width:%?10?%;height:%?16?%;background:url('+l+") no-repeat;background-size:100% 100%}.chat_right[data-v-54fe3ed1]{-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;display:-webkit-box;display:-webkit-flex;display:flex}.chat_right .tx[data-v-54fe3ed1]{margin-left:%?20?%}.chat_bottom_top uni-image[data-v-54fe3ed1]{width:%?56?%;height:%?56?%}.chat_bottom_top[data-v-54fe3ed1]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?101?%;background-color:#f7f7f7;border:solid %?1?% #d9d9d9;padding:0 %?30?%;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.chat_bottom_top uni-input[data-v-54fe3ed1]{width:%?438?%;height:%?76?%;background-color:#fff;border-radius:%?8?%;border:solid %?2?% #d9d9d9!important;padding-left:%?10?%;box-sizing:border-box}.chat_bottom_bottom[data-v-54fe3ed1]{background-color:#fafafa;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:%?40?% 0}.chat_bt_item[data-v-54fe3ed1]{text-align:center;width:33.33%}.chat_bt_item uni-image[data-v-54fe3ed1]{width:%?126?%;height:%?126?%;background-color:#fff;border-radius:%?30?%}.chat_bottom[data-v-54fe3ed1]{position:fixed;bottom:0;width:100%}.slider[data-v-54fe3ed1]{width:375;height:128}.slider-emoji[data-v-54fe3ed1]{width:375;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.slider-emoji-icon[data-v-54fe3ed1]{width:53%;text-align:center;padding:10.5 0}\r\n\r\n/* \x3c!-- 设置最后一列左靠齐 --\x3e */.lastbox[data-v-54fe3ed1]{-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start}.zhanwei[data-v-54fe3ed1]{height:%?360?%}.ls_name[data-v-54fe3ed1]{position:absolute;top:%?-38?%;display:inline-block;width:%?400?%;font-size:%?20?%;left:0}.fasong[data-v-54fe3ed1]{background-color:#07c160;color:#fff;font-size:%?30?%;width:%?98?%;height:%?74?%;line-height:%?74?%;text-align:center;display:inline-block;border-radius:%?10?%}",""]),t.exports=e},"7d14":function(t,e,i){"use strict";i.r(e);var a=i("8ad9"),o=i("304a");for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("946a");var s,c=i("f0c5"),l=Object(c["a"])(o["default"],a["b"],a["c"],!1,null,"54fe3ed1",null,!1,a["a"],s);e["default"]=l.exports},"8ad9":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{},[a("v-uni-view",{staticClass:"head"},[a("v-uni-view",{staticClass:"head_back",staticStyle:{width:"10%"}},[a("v-uni-image",{attrs:{src:i("24e8").replace(/^\./,""),mode:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navigateBack()}}})],1),a("v-uni-view",{staticClass:"head_center ",staticStyle:{width:"80%"}},[a("v-uni-view",{staticClass:"hei_38_bold top_title"},[t._v(t._s(t.title))]),a("v-uni-view",{staticClass:"qian_20 chat_lvsuo"},[t._v(t._s(t.dianhua))])],1),a("v-uni-view",{staticClass:" head_right hei_30_bold",staticStyle:{width:"10%"}})],1),a("v-uni-view",{staticClass:"zi_body"},[a("v-uni-view",{class:["chat_body",t.bt_show?"chat_body_jia":""],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tan_hide.apply(void 0,arguments)}}},[""!=t.message?a("v-uni-view",{staticClass:"time qian_20"},[t._v(t._s(t._f("timeStamp")(t.message[0].addtime)))]):t._e(),t._l(t.message,(function(e,i){return a("v-uni-view",[i>1&&t.message[i].addtime-t.message[i-1].addtime>300?a("v-uni-view",{staticClass:"time qian_20"},[t._v(t._s(t._f("timeStamp")(t.message[i].addtime)))]):t._e(),e.userid_from!=t.userid?a("v-uni-view",{staticClass:"chat_list chat_right"},[a("v-uni-view",{staticClass:"chat_right_txt hei_30"},[2==e.msgtype?a("v-uni-image",{staticStyle:{"max-width":"100rpx"},attrs:{src:t.img_url+e.content,mode:"widthFix"}}):t._e(),1==e.msgtype?a("v-uni-view",[a("u-parse",{attrs:{content:t.replace_em(e.content)}})],1):t._e(),void 0!=e.to?a("v-uni-image",{staticStyle:{"max-width":"100rpx"},attrs:{src:e.content,mode:"widthFix"}}):t._e()],1),a("v-uni-image",{staticClass:"tx",attrs:{src:t.img_url+e.photourl_form,mode:""}})],1):t._e(),e.userid_from==t.userid?a("v-uni-view",{staticClass:"chat_list chat_left"},[a("v-uni-image",{staticClass:"tx",attrs:{src:t.img_url+e.photourl_form,mode:""}}),a("v-uni-view",{staticClass:"chat_left_txt hei_30"},[a("v-uni-text",{staticClass:"ls_name"},[t._v(t._s(t.title))]),2==e.msgtype?a("v-uni-image",{staticStyle:{"max-width":"100rpx"},attrs:{src:t.img_url+e.content,mode:"widthFix"}}):t._e(),1==e.msgtype?a("v-uni-view",[a("u-parse",{attrs:{content:t.replace_em(e.content)}})],1):t._e()],1)],1):t._e()],1)}))],2),t.isShowEmj?a("v-uni-view",{staticClass:"zhanwei"}):t._e(),a("v-uni-view",{staticClass:"chat_bottom"},[a("v-uni-view",{staticClass:"chat_bottom_top"},[a("v-uni-image",{attrs:{src:i("187d").replace(/^\./,""),mode:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showEmj.apply(void 0,arguments)}}}),a("v-uni-input",{staticClass:"hei_26",attrs:{type:"text",value:"","confirm-type":"send"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.send.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.huojiao.apply(void 0,arguments)}},model:{value:t.chat_txt,callback:function(e){t.chat_txt=e},expression:"chat_txt"}}),a("v-uni-image",{attrs:{src:i("1f49").replace(/^\./,""),mode:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.jia.apply(void 0,arguments)}}}),a("v-uni-text",{staticClass:"fasong",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.send()}}},[t._v("发送")])],1),t.isShowEmj?a("emotion",{on:{emotion:function(e){arguments[0]=e=t.$handleEvent(e),t.handleEmj.apply(void 0,arguments)}}}):t._e(),t.bt_show?a("v-uni-view",{staticClass:"chat_bottom_bottom hui_26"},[a("v-uni-view",{staticClass:"chat_bt_item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.call.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:i("76bd").replace(/^\./,""),mode:""}}),a("v-uni-view",[t._v("打电话给TA")])],1),a("v-uni-view",{staticClass:"chat_bt_item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.up_img.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:i("5f89").replace(/^\./,""),mode:""}}),a("v-uni-view",[t._v("发送图片")])],1),a("v-uni-view",{staticClass:"chat_bt_item"},[a("v-uni-picker",{attrs:{range:t.changyong_arry},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.changyong_change.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:i("6af5").replace(/^\./,""),mode:""}}),a("v-uni-view",[t._v("常用语")])],1)],1)],1):t._e()],1)],1)],1)},n=[]},"8e81":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAPCAYAAADQ4S5JAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RUE1NjBBNUQxNTBGMTFFQjg3QTVDQzlCNTVGRDlFQkYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RUE1NjBBNUUxNTBGMTFFQjg3QTVDQzlCNTVGRDlFQkYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFQTU2MEE1QjE1MEYxMUVCODdBNUNDOUI1NUZEOUVCRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFQTU2MEE1QzE1MEYxMUVCODdBNUNDOUI1NUZEOUVCRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Prjvj+MAAAEOSURBVHjahFLbroJADOxyCxdJECRAwv9/GYKKAnIL9x67CT4oeOapze5sZ6bLEBH+Q9u2GEURr6VfF+mxx+OBWZbxXtf1fcI0TRDHMXZdB4wxcBwHbNveJtR1jdfrFeZ5BkmSIAgC0DTtWxJJSNMUi6Lg/eFwAM/zQBTF9503YRgGSJIE+77nEk6nExyPx6/pnFCWJd5uN1iWBRRFAd/3QVXVTW9SVVV4uVx4Q6PDMOS69yCYpsnoRZJBJilvkrUHti7u04PrumBZ1j5hTenlBZ/P5zslmi4IwjZhBfmiPVAIsizzPawhsL2/NI4jviTC56bZr89HZ/f7HfM8571hGL8JK5qmwfP5zOs/AQYA/O6fdS70dcIAAAAASUVORK5CYII="},"946a":function(t,e,i){"use strict";var a=i("c8ff"),o=i.n(a);o.a},9822:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6M0YwREYwMTgxNTExMTFFQkJDQjRFRUM2OTk2MUM2QzYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6M0YwREYwMTkxNTExMTFFQkJDQjRFRUM2OTk2MUM2QzYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozRjBERjAxNjE1MTExMUVCQkNCNEVFQzY5OTYxQzZDNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozRjBERjAxNzE1MTExMUVCQkNCNEVFQzY5OTYxQzZDNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgVj5xcAAACQSURBVHjalJNJDsQwCAQx3v7/WUteiTvSjCIlTJg++GBRUAdwpRTJORMzOzKE8dRaqfcuZgAZYwCUHRuArLVOaM4pJgDBhNaaqshaJ02Rf/leFG3ARVE+ioGMgSL82Ap47yml5EwTUAjgVWmvy1m88/1TgRACxRhv+3UD0G0XwvlxGcObggpoCo/AP/dwCDAAKO1P+mWWbD0AAAAASUVORK5CYII="},bbd4:function(t,e,i){"use strict";var a=i("4ea4");i("a9e3"),i("ac1f"),i("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,n=a(i("ade3")),s=a(i("b787")),c=a(i("e3f1")),l=a(i("4542")),d={created:function(){},components:{emotion:s.default,uParse:c.default},onLoad:function(t){var e=this;this.userid=t.userid,this.huoqu_xiaoxi_list(),this.$http.post({url:"/mlawyerapi/user/getlawyer"}).then((function(t){e.user=t.data.user})),this.connectSocketInit()},onShow:function(){},onUnload:function(){console.log("onUnload")},data:function(){return{title:"",user:"",bt_show:!1,url:"../../static/bkhumor-emoji/",img:"11.gif",chat_txt:"",changyong:"",changyong_arry:["你好,有什么可以帮助到您？","客服的上班时间是早晨八点到晚上八点","好的，有什么事情可以找客服帮您疑难解答"],isShowEmj:!1,img_url:uni.getStorageSync("img_url"),message:[],page:0,is_all:!1,userid:"",dianhua:"",is_fa:!1}},onPullDownRefresh:function(){setTimeout((function(){uni.showToast({title:"没有更多内容了",duration:2e3,icon:"none"}),uni.stopPullDownRefresh()}),1e3)},methods:(o={onReachBottom:function(){},navigateBack:function(){uni.navigateBack()},huoqu_xiaoxi_list:function(){var t=this;this.$http.post({url:"/mlawyerapi/consult/chatdeatils",data:{page:this.page,userid:this.userid}}).then((function(e){t.message=e.data.message,t.title=e.data.user_to.nickname,t.dianhua=e.data.user_to.mobile,setTimeout((function(){uni.pageScrollTo({scrollTop:99999,duration:0})}),200)}))},huojiao:function(){setTimeout((function(){uni.pageScrollTo({scrollTop:99999,duration:0})}),100)},app_lianjie:function(){var t=this;Object.assign(uni,l.default),console.log(Object.assign(uni,l.default));var e=t.$http.WebSocket_url;l.default.connectSocket({url:"ws://"+e+":3348",success:function(t){console.log("websocket已连接",JSON.stringify(t))}}),l.default.onSocketOpen((function(t){console.log("WebSocket连接已打开！")})),l.default.onSocketError((function(t){console.log("WebSocket连接打开失败，请检查！",JSON.stringify(t))})),l.default.onSocketMessage((function(e){console.log("收到服务器内容："+e.data);var i=JSON.parse(e.data);if("init"==i.type)console.log("init"),console.log("client_id",i.client_id),uni.request({url:t.$http.baseUrl+"/push/gatewayworker/bind",method:"POST",data:{client_id:i.client_id},success:function(t){console.log(t,"bind")},fail:function(t){}});else if("say"==i.type){if(console.log("say"),i.state){var a={photourl_form:i.userid_from_pic,userid_to:i.userid_to,photourl_to:i.userid_to_pic,content:i.msg,msgtype:i.state,userid_from:t.ls_id};t.user.userid!=i.userid_from&&t.message.push(a),setTimeout((function(){uni.pageScrollTo({scrollTop:99999,duration:0})}),100)}}else console.log("else");console.log(i)})),l.default.onSocketClose((function(t){console.log("WebSocket 已关闭！")}))},handleEmj:function(t){console.log(t),"[em_98]"==t?this.chat_txt=this.chat_txt.replace(/(\[[^\]]+\]|[\s\S])$/,""):this.chat_txt+=t},replace_em:function(t){return t=t.replace(/\</g,"&lt;"),t=t.replace(/\>/g,"&gt;"),t=t.replace(/\n/g,"<br/>"),t=t.replace(/\[em_([0-9]*)\]/g,'<img src="../../static/bkhumor-emoji/$1.gif" border="0" style="width:40rpx"/>'),t}},(0,n.default)(o,"handleEmj",(function(t){console.log(t),"[em_98]"==t?this.chat_txt=this.chat_txt.replace(/(\[[^\]]+\]|[\s\S])$/,""):this.chat_txt+=t})),(0,n.default)(o,"showEmj",(function(){var t=!this.isShowEmj;t?(this.emojiIcon="cuIcon-keyboard",this.bt_show=!1):this.emojiIcon="cuIcon-emoji",this.isShowEmj=t,this.$emit("show")})),(0,n.default)(o,"jia",(function(){this.bt_show=!this.bt_show,this.isShowEmj=!1})),(0,n.default)(o,"input_change",(function(){""==this.chat_txt?this.is_fa=!1:this.is_fa=!0})),(0,n.default)(o,"send",(function(){var t=this;console.log(this.chat_txt);this.chat_txt,this.id;var e=this.replace_em(this.chat_txt);if(""==e)return uni.showToast({title:"请输入内容",duration:2e3,icon:"none"}),!1;this.$http.post({url:"/push/gatewayworker/sendmessage1.html",data:{userid_to:this.userid,msg:this.chat_txt,type:1}}).then((function(i){if(0==i.code){t.chat_txt="";var a={content:e,msgtype:1,photourl_form:t.user.photourl};t.message.push(a),setTimeout((function(){uni.pageScrollTo({scrollTop:99999,duration:0})}),100)}}))})),(0,n.default)(o,"call",(function(){uni.makePhoneCall({phoneNumber:this.dianhua+"",success:function(t){console.log("调用成功!")},fail:function(t){console.log("调用失败!")}})})),(0,n.default)(o,"up_img",(function(){var t=this;uni.chooseImage({success:function(e){console.log(e),uni.request({url:e.tempFilePaths[0],method:"GET",responseType:"arraybuffer",success:function(e){var i=wx.arrayBufferToBase64(e.data);i="data:image/jpeg;base64,"+i,console.log(i),t.$http.post({url:"/index/zixun/uploadimgmessage",data:{img:i}}).then((function(e){0==e.code&&t.send_img(e.data.img)}))}})}})})),(0,n.default)(o,"send_img",(function(t){var e=this;this.$http.post({url:"/push/gatewayworker/sendmessage1.html",data:{userid_to:this.userid,msg:t,type:2}}).then((function(i){if(0==i.code){var a={content:t,msgtype:2,photourl_form:e.user.photourl};e.message.push(a),setTimeout((function(){uni.pageScrollTo({scrollTop:99999,duration:0})}),100)}}))})),(0,n.default)(o,"changyong_change",(function(t){this.changyong=this.changyong_arry[t.detail.value],this.chat_txt=this.changyong_arry[t.detail.value],console.log(this.changyong)})),(0,n.default)(o,"tan_hide",(function(){this.isShowEmj=!1,this.bt_show=!1})),(0,n.default)(o,"connectSocketInit",(function(){var t=window.location.host;console.log(t);var e=new WebSocket("ws://"+t+":3348");e.onopen=function(t){console.log("Connection open ...")},e.onmessage=function(t){var e=this;console.log("Received Message: "+t.data);var i=JSON.parse(t.data);if("init"==i.type)console.log("init"),console.log("client_id",i.client_id),e.$http.post({url:"/push/gatewayworker/bind",data:{client_id:i.client_id}}).then((function(t){console.log(t,"bind")}));else if("say"==i.type){if(console.log("say"),i.state){var a={photourl_form:i.userid_from_pic,userid_to:i.userid_to,photourl_to:i.userid_to_pic,content:i.msg,msgtype:i.state,userid_from:e.ls_id};e.message.push(a),setTimeout((function(){uni.pageScrollTo({scrollTop:99999,duration:0})}),100)}}else console.log("else")},e.onclose=function(t){console.log("Connection closed.")},e.onerror=function(t){console.log("WebSocketError!",t)}})),o),filters:{timeStamp:function(t){if(null==t)return"null";var e=(t+"").length;while(e++<13)t+="0";t=Number(t);var i=new Date(t),a=i.getMonth()+1,o=i.getHours();o<10&&(o="0"+o);var n=i.getMinutes();n<10&&(n="0"+n);var s=i.getFullYear()+"-"+a+"-"+i.getDate()+" "+o+":"+n;return s}}};e.default=d},c8ff:function(t,e,i){var a=i("6c8e");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("0253d633",a,!0,{sourceMap:!1,shadowMode:!1})}}]);